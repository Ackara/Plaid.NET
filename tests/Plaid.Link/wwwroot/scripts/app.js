var PlaidLink;!function(e){var t=(o.bindToElements=function(e){e=e||document.body,document.body.addEventListener("click",function(e){for(var t=e.target,n=0;n<5;n++){if(t.getAttribute("data-can-copy"))return void o.copy(t.value||t.textContent||t.innerText);t=t.parentElement}})},o.copy=function(e){var t=document.createElement("textarea");return t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),console.debug("copied '"+e+"' to clipboard"),e},o.copyElementText=function(e){return e&&e.innerText&&this.copy(e.innerText.trim()),null},o);function o(){}e.Clipboard=t}(PlaidLink=PlaidLink||{}),PlaidLink.Clipboard.bindToElements(),function(e){var t=(n.prototype.then=function(e){return this.thenCallback=e,this},n.prototype.catch=function(e){return this.catchCallback=e,this},n.prototype.finally=function(e){this.finalCallback=e},n.prototype.pass=function(e){this.thenCallback&&this.thenCallback(e||!0),this.finalCallback&&this.finalCallback()},n.prototype.reject=function(e){this.catchCallback&&this.catchCallback(e),this.finalCallback&&this.finalCallback()},n);function n(e){e(this.pass.bind(this),this.reject.bind(this))}e.ServerPromise=t;var o=(s.getAccesssToken=function(e,t){return t.publicToken=e,this.sendHttpRequest("POST","Plaid/GetAccessToken",{body:t})},s.sendHttpRequest=function(i,a,c){return new t(function(t,n){var o="application/json; charset=utf-8";(c=c||{}).hasOwnProperty("contentType")||(c.contentType="object"==typeof c.body?o:null);var e=new XMLHttpRequest;if(e.open(i,a,!0),c.contentType&&e.setRequestHeader("Content-Type",c.contentType),c.headers)for(var s=0;s<c.headers.length;s++)e.setRequestHeader(c.headers[s].name,c.headers[s].value);e.onreadystatechange=function(){var e;4===this.readyState&&(e=this.getResponseHeader("Content-Type")===o?JSON.parse(this.responseText):this.responseText,200<=this.status&&this.status<=299?(t(e),e||console.warn(i+" "+this.responseURL+": NO CONTENT")):(n({status:this.status,url:this.responseURL,data:e,message:(i+" "+this.responseURL+": "+this.status+" "+("object"!=typeof e?this.responseText:"")).trim()}),console.debug(e)))},e.onerror=function(){n({message:"Network Error"})},c.contentType===o?e.send(JSON.stringify(c.body)):e.send(c.body)})},s);function s(){}e.Server=o}(PlaidLink=PlaidLink||{}),function(o){var e=(t.prototype.onCopyToClipboardButtonClicked=function(){o.Clipboard.copy(this.accessToken())},t.prototype.onRefreshButtonClicked=function(){this._dropIn.open()},t);function t(e){var n=this;this.accessToken=ko.observable(e.accessToken),console.debug(e),this._dropIn=Plaid.create({token:e.token,onSuccess:function(e,t){console.debug(t),o.Server.getAccesssToken(e,t).then(function(e){console.debug(e),n.accessToken(e.accessToken),o.Clipboard.copy(e.accessToken)})},onExit:function(e,t){}}),e.accessToken||this.onRefreshButtonClicked()}o.IndexPage=e}(PlaidLink=PlaidLink||{});
//# sourceMappingURL=app.js.map